<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<style>
    table {
        font-family: arial, sans-serif;
        border-collapse: collapse;
        width: 100%;
    }

    th,
    tr,
    td {
        padding: 8px;
    }

    tr {
        border: 1px solid #dddddd;
        text-align: left;
    }
</style>

<body>
    <h1 id="titre"></h1>
    <table id="result"></table>


    <script>
        let data = {
            "polluant": "CO2",
            "unite": "milliards de tonnes",
            "annee": 2017,
            "pays": [{
                    "nom": "Chine",
                    "valeur": 9.26,
                    "pourcentage": 28.2,
                    "code": "cn"
                },
                {
                    "nom": "Etats-Unis",
                    "valeur": 4.76,
                    "pourcentage": 14.5,
                    "code": "us"
                },
                {
                    "nom": "Inde",
                    "valeur": 2.16,
                    "pourcentage": 6.6,
                    "code": "in"
                },
                {
                    "nom": "Russie",
                    "valeur": 1.54,
                    "pourcentage": 4.7,
                    "code": "ru"
                },
                {
                    "nom": "Japon",
                    "valeur": 1.13,
                    "pourcentage": 3.4,
                    "code": "jp"
                },
                {
                    "nom": "Allemagne",
                    "valeur": 0.72,
                    "pourcentage": 2.2,
                    "code": "de"
                },
                {
                    "nom": "Cor√©e du Sud",
                    "valeur": 0.6,
                    "pourcentage": 1.8,
                    "code": "kr"
                },
                {
                    "nom": "Iran",
                    "valeur": 0.57,
                    "pourcentage": 1.7,
                    "code": "ir"
                },
                {
                    "nom": "Canada",
                    "valeur": 0.55,
                    "pourcentage": 1.7,
                    "code": "ca"
                }
            ]
        }

        document.getElementById("titre").innerHTML = "Pays les plus polluants pour le " + data.polluant + " (" + data
            .unite + ") en " + data.annee;

        let table =
            "<thead> \
                <tr><th></th> <th>Nom</th> <th>Valeur</th> <th>%</th> </th> \
            </thead> \
            <tbody>"

        data.pays.forEach(d => {
            // const tag = document.createElement("table")
            table +=
                "<tr> <td>" +
                "<img src='https://flagcdn.com/32x24/" + d.code + ".png'>" +
                "</td>" +
                "<td>" +
                d.nom +
                "</td>" +
                "<td>" +
                d.valeur +
                "</td>" +
                "<td>" +
                d.pourcentage +
                "</td> </tr>"
            // document.getElementById("result").appendChild(tag)
        })
        table += "</tbody>"
        document.getElementById("result").innerHTML = table
    </script>
</body>

</html>